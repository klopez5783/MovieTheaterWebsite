@model MovieTheater.MovieView

@{
    ViewBag.Title = "MovieDetails";
}


@section FullWidth {
    <div class="TicketThumbnail__img" id="TicketThumbnail__img">

        <img src="~/Images/FastX/Fast-X-7.png" />

        

        <div class="TicketThumbnail">

            <div class="TicketThumbnail__Text">

                <button id="playButton" >
                    <img class="normal" src="~/Images/Icons/play-button.png" />
                    <img class="hover" src="~/Images/Icons/play-buttonActive.png" />
                </button>

                <div style="font-family: Impact, Charcoal, sans-serif;font-size:70px;color:white;">
                    @Model.movie.Name
                </div>
                <button type="button" class="TicketsButton">
                    <span class="TicketsButton__text" onclick="window.location.href='@Url.Action("BuyTickets", new { id = Model.movie.MovieID })'">
                        Get Tickets
                    </span>
                    <span class="TicketsButton__icon">
                        <img src="~/Images/ticket.png" />
                    </span>
                </button>
            </div>
        </div>

    </div>

}

<div id="videoDiv" style="display:none;">
    <div id="closeButtonDiv" style="display:flex;justify-content:space-between;align-items:center;">
        <div>
            @Model.movie.Name | Trailer
        </div>
        <div style="text-align:right;">
            <button id="closeButton">
                <img src="~/Images/Icons/close.png" />
            </button>
        </div>
    </div>
    
    <div id="videoPlayerDiv" style="display:flex;justify-content:center;">
        <video id="my-video"
               class="video-js vjs-default-skin"
               controls
               preload="auto"
               poster="poster.jpg"
               data-setup='{}'>
            <source src="~/MovieTrailers/FAST%20X%20Final%20Trailer.mp4" type="video/mp4" />
        </video>
    </div>

</div>


<div id="movieInfo" style="display:flex;margin:60px auto 0px auto;font-size:20px;">
    <div id="movieDetails" style="width: 350px; text-transform: uppercase;font-weight:500">
        <div style="width:200px;">@Model.movie.GetRunTime() | @Model.movie.AgeRating</div>
        <div>@Model.movie.Date.ToString("d")</div>
        <div><span style="">@Model.movie.Category</span></div>
    </div>
    <div id="MovieDescription" style="margin-left:100px;">
        <span style="text-transform:uppercase">@Model.movie.Name</span>, @Model.movie.Description
    </div>
</div>


<div id="carouselExampleIndicators" class="carousel slide">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img style="width:700px;height:600px;" src="~/Images/FastX/fast-x-street-race.png" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
            <img style="width:700px;height:600px;" src="~/Images/FastX/Jason.jpg" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
           <img style="width:700px;height:600px;" src="~/Images/FastX/Cookout_For_Joshua.jpg"  class="d-block w-100" alt="...">
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>


<p>
    @Html.ActionLink("Edit", "EditMovie", new { id = Model.movie.MovieID }) |
    @Html.ActionLink("Back to List", "ListMovies")
</p>


<script type="text/javascript">
    window.onload = function () {

        let Player = videojs('my-video');


        document.getElementById('playButton').addEventListener('click', function () {
            console.log("playbutton Clicked!");
            document.getElementById('TicketThumbnail__img').style.display = 'none';
            document.getElementById('videoDiv').style.display = 'block';
        });

        document.getElementById('closeButton').addEventListener('click', function () {
            Player.pause();
            Player.currentTime(0);
            document.getElementById('videoDiv').style.display = 'none';
            document.getElementById('TicketThumbnail__img').style.display = 'block';
        });


    }
</script>
